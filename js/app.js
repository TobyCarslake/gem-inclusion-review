// Quality of evidence	
// Level 1 	Experimental Designs 
// Level 2	Quasi-experimental Designs
// Level 3	Observational – Analytic Designs 
// Level 4	Observational –Descriptive Studies 
// Level 5	Expert Opinion and Bench Research 



const data = [
  {
    "no": 1,
    "key": "L53YZDVV",
    "URL": "https://eric.ed.gov/?id=EJ1069532",
    "reference": "Agbenyega, J. S., & Klibthong, S. (2015). Transforming Thai preschool teachers' knowledge on inclusive practice: A collaborative inquiry. Australian Journal of Teacher Education, 40(7), 5.",
    "findings": "Enhanced preschool teachers’ understanding of inclusion.\nImproved learning potential for children with and without disabilities.",
    "title": "Transforming Thai Preschool Teachers' Knowledge on Inclusive Practice: A Collaborative Inquiry",
    "authors": "Agbenyega, Joseph Seyram; Klibthong, Sunanta",
    "year": 2015,
    "country": "Thailand",
    "quality": "Level 3",
    "pop": "Agbenyega 2015, Thailand",
    "intervention": "Inclusive",
    "outcomes": "Early,Attitude,Pedagogical"
  },
  {
    "no": 2,
    "key": "ASE6LY3N",
    "URL": "http://dx.doi.org/10.1177/1525740114544027",
    "reference": "Cheng, L. R. L., Wallach, G. P., & Reed, V. A. (2015). ASHA SLPs in China teach teachers about their students with disabilities. Communication Disorders Quarterly, 36(2), 119-120.",
    "findings": "Improved teachers’ understanding of principles behind assessment and intervention.\nTeachers improved knowledge on the importance of language and communication in understanding children’s learning challenges.\nTeachers improved their ability to recognise the individuality of each child.",
    "title": "ASHA SLPs in China Teach Teachers about Their Students with Disabilities",
    "authors": "Cheng, Li-Rong Lilly; Wallach, Geraldine P.; Reed, Vicki A.",
    "year": 2015,
    "country": "China",
    "quality": "Level 3",
    "pop": "Cheng 2015, China",
    "intervention": "Intellectual,Sensory",
    "outcomes": "Primary,Secondary,Attitude"
  },
  {
    "no": 3,
    "key": "WAXG3EQU",
    "URL": "https://eric.ed.gov/?id=EJ1094919",
    "reference": "Eng, P. S. (2015). IEP Documentation for Effective Systematic Facilitation. International Journal of Special Education, 30(1), 78-89.",
    "findings": "Greater staff awareness for students as individual with abilities and needs to acquire specified skills.",
    "title": "IEP Documentation for Effective Systematic Facilitation",
    "authors": "Eng, Peng-Sim",
    "year": 2015,
    "country": "Vietnam",
    "quality": "Level 3",
    "pop": "Eng 2015, Vietnam",
    "intervention": "Physical,Intellectual,Sensory",
    "outcomes": "Special,Pedagogical,Managing,Learning,Behaviour"
  },
  {
    "no": 4,
    "key": "IN7M6QNL",
    "URL": "http://dx.doi.org/10.26822/iejee.2020358219",
    "reference": "Hai, N. X., Villa, R. A., Thousand, J. S., & Muc, P. M. (2020). Inclusion in Vietnam: More than a Quarter Century of Implementation. International Electronic Journal of Elementary Education, 12(3), 257-264.",
    "findings": "Increased activity-based instruction and student-teacher interactions.\nStudents explored new ideas via cooperative learning.\nPositive changes in teacher and classmate attitudes and feelings about children with disabilities.\nIncreased perception that all children should be respected.",
    "title": "Inclusion in Vietnam: More than a Quarter Century of Implementation.",
    "authors": "Hai, Nguyen Xuan; Villa, Richard A.; Le Van Tac; Thousand, Jacqueline S.; Pham Minh Muc",
    "year": 2020,
    "country": "Vietnam",
    "quality": "Level 3",
    "pop": "Hai 2020, Vietnam",
    "intervention": "Inclusive",
    "outcomes": "Primary,Attitude,Pedagogical,Learning,Behaviour"
  },
  {
    "no": 5,
    "key": "JQ6XUVUI",
    "URL": "http://dx.doi.org/10.1080/13632752.2013.819254",
    "reference": "Hussein, S. A., & Vostanis, P. (2013). Teacher training intervention for early identification of common child mental health problems in Pakistan. Emotional and behavioural difficulties, 18(3), 284-296.",
    "findings": "Improved teachers’ knowledge and recognition of child mental health problems.",
    "title": "Teacher Training Intervention for Early Identification of Common Child Mental Health Problems in Pakistan",
    "authors": "Hussein, S. A.; Vostanis, P.",
    "year": 2013,
    "country": "Pakistan",
    "quality": "Level 2",
    "pop": "Hussein 2013, Pakistan",
    "intervention": "Intellectual",
    "outcomes": "Primary,Attitude,Managing"
  },
  {
    "no": 6,
    "key": "INW9G3QT",
    "URL": "https://eric.ed.gov/?id=EJ872441",
    "reference": "Kantavong, P., & Sivabaedya, S. (2010). A Professional Learning Program for Enhancing the Competency of Students with Special Needs. International Journal of Whole Schooling, 6(1), 53-62.",
    "findings": "Improved teachers’ knowledge and understanding on helping students with special needs in inclusive classrooms.\nHigher student achievement scores in Math, reading and Spelling.",
    "title": "A Professional Learning Program for Enhancing the Competency of Students with Special Needs",
    "authors": "Kantavong, Pennee; Sivabaedya, Suwaree",
    "year": 2010,
    "country": "Thailand",
    "quality": "Level 2",
    "pop": "Kantavong 2010, Thailand",
    "intervention": "Intellectual",
    "outcomes": "Primary,Attitude,Pedagogical,Learning"
  },
  {
    "no": 7,
    "key": "JRB3EZB4",
    "URL": "http://dx.doi.org/10.14221/ajte.2018v43n3.7",
    "reference": "Klibthong, S., & Agbenyega, J. S. (2018). Exploring professional knowing, being and becoming through inclusive pedagogical approach in action (IPAA) framework. Australian Journal of Teacher Education, 43(3), 7.",
    "findings": "Deepened educators’ understanding of inclusive pedagogical knowledge about SEN.\nTransformed educators’ beliefs about teaching young children with SEN.",
    "title": "Exploring professional knowing, being and becoming through inclusive pedagogical approach in action (IPAA) framework",
    "authors": "Klibthong, S.; Agbenyega, J.S.",
    "year": 2018,
    "country": "Thailand",
    "quality": "Level 3",
    "pop": "Klibthong 2018, Thailand",
    "intervention": "Inclusive",
    "outcomes": "Early,Attitude"
  },
  {
    "no": 8,
    "key": "P4RM7X2J",
    "URL": "https://www.proquest.com/docview/2272840258",
    "reference": "Locharoenrat, W. (2019). Examining the Effectiveness of a Basic Functional Behavior Assessment Training Package on Special Education Teachers in Thailand: A Replication Study.",
    "findings": "Teachers' acquired knowledge on FBA.\nImproved teachers’ understanding of the causes of behaviours and on dealing with problem behaviours.",
    "title": "Examining the Effectiveness of a Basic Functional Behavior Assessment Training Package on Special Education Teachers in Thailand: A Replication Study",
    "authors": "Locharoenrat, Weeramol",
    "year": 2019,
    "country": "Thailand",
    "quality": "Level 1",
    "pop": "Locharoenrat 2019, Thailand",
    "intervention": "Inclusive",
    "outcomes": "Primary,Secondary,Managing"
  },
  {
    "no": 9,
    "key": "5CVH2LC4",
    "URL": "https://www.jstor.org/stable/44390116",
    "reference": "Martin, D. S., Craft, A., & Sheng, Z. N. (2001). The impact of cognitive strategy instruction on deaf learners: An international comparative study. American Annals of the Deaf, 146(4), 366-378.",
    "findings": "Gains in reasoning skills of children.\nImproved classroom- teaching techniques.",
    "title": "The Impact of Cognitive Strategy Instruction on Deaf Learners: An International Comparative Study.",
    "authors": "Martin, David S.; Craft, Anna; Sheng, Zhang Ning",
    "year": 2001,
    "country": "China",
    "quality": "Level 2",
    "pop": "Martin 2001, China",
    "intervention": "Sensory",
    "outcomes": "Special,Pedagogical,Learning,Behaviour"
  },
  {
    "no": 10,
    "key": "S5I7CJFS",
    "URL": "http://dx.doi.org/10.1177/088840640803100204",
    "reference": "McCabe, H. (2008). Effective teacher training at the autism institute in the People's Republic of China. Teacher Education and Special Education, 31(2), 103-117.",
    "findings": "Teaching became more systematic.\nTeachers were more involved and knowledgeable.\nThe intervention encouraged mentoring and better relationships among the teachers and staff.",
    "title": "Effective Teacher Training at the Autism Institute in the People's Republic of China.",
    "authors": "McCabe, Helen",
    "year": 2008,
    "country": "China",
    "quality": "Level 3",
    "pop": "McCabe 2008, China",
    "intervention": "Intellectual",
    "outcomes": "Special,Attitude,Pedagogical"
  },
  {
    "no": 11,
    "key": "Add016",
    "URL": "https://doi.org/10.1080/07434618.2018.1512651",
    "reference": "Muttiah, N., Drager, K. D., McNaughton, D., & Perera, N. (2018). Evaluating an AAC training for special education teachers in Sri Lanka, a low-and middle-income country. Augmentative and Alternative Communication, 34(4), 276-287.",
    "findings": "Improved the number of evocative communication opportunities provided by teachers\nIncreased the number of communication turns taken by students.",
    "title": "Evaluating an AAC training for special education teachers in Sri Lanka, a low-and middle-income country",
    "authors": "Muttiah, N., Drager, K. D., McNaughton, D., & Perera, N.",
    "year": 2018,
    "country": "Sri Lanka",
    "quality": "Level 2",
    "pop": "Muttiah 2018, Sri Lanka",
    "intervention": "Inclusive",
    "outcomes": "Special,Attitude,Pedagogical,Behaviour"
  },
  {
    "no": 12,
    "key": "U5HSKNUR",
    "URL": "http://dx.doi.org/10.1177/1053451215577471",
    "reference": "Opartkiattikul, W., Arthur-Kelly, M., & Dempsey, I. (2015). Implementing functional behavior assessment in Thailand. Intervention in School and Clinic, 51(1), 58-64.",
    "findings": "Teachers’ implemented the behaviour goals in their classrooms.\nStudents’ achieved target behaviours.",
    "title": "Implementing Functional Behavior Assessment in Thailand",
    "authors": "Opartkiattikul, W.; Arthur-Kelly, M.; Dempsey, I.",
    "year": 2015,
    "country": "Thailand",
    "quality": "Level 3",
    "pop": "Opartkiattikul 2015, Thailand",
    "intervention": "Inclusive",
    "outcomes": "Primary,Managing,Behaviour"
  },
  {
    "no": 13,
    "key": "FYAZRAB8",
    "URL": "https://eric.ed.gov/?id=EJ1239168",
    "reference": "Salim, A., Hidayatullah, M. F., & Nugraheni, P. P. (2019). Investigating Effectiveness of Disability Friendly Education Training Modules in Indonesian Schools. International Journal of Education and Practice, 7(3), 286-293.",
    "findings": "Improved teachers' understanding of disability and inclusion.",
    "title": "Investigating Effectiveness of Disability Friendly Education Training Modules in Indonesian Schools",
    "authors": "Salim, Abdul; Hidayatullah, M. Furqon; Nugraheni, Permata Primadhita; W., Dian Atnantomi",
    "year": 2019,
    "country": "Indonesia",
    "quality": "Level 2",
    "pop": "Salim 2019, Indonesia",
    "intervention": "Inclusive",
    "outcomes": "Primary,Attitude"
  },
  {
    "no": 14,
    "key": "2KTKTLFJ",
    "URL": "http://dx.doi.org/10.1007/s10597-011-9437-2",
    "reference": "Shah, H., & Kumar, D. (2012). Sensitizing the teachers towards school mental health issues: An Indian experience. Community mental health journal, 48(4), 522-526.",
    "findings": "Enhanced school teachers’ awareness about positive mental health issues, and childhood emotional and behavioural diffculties to facilitate early identification and intervention.",
    "title": "Sensitizing the teachers towards school mental health issues: An indian experience",
    "authors": "Shah, H.; Kumar, D.",
    "year": 2012,
    "country": "India",
    "quality": "Level 3",
    "pop": "Shah 2012, India",
    "intervention": "Intellectual",
    "outcomes": "Primary,Attitude,Pedagogical"
  },
  {
    "no": 15,
    "key": "TQDWRQJ8",
    "URL": "https://www.iase.org/JIASE_2016.pdf#page=111",
    "reference": "Simpson, L. A., Sharon, Q., Kan, H., & Qing Qing, T. (2016). Distance Learning: A Viable option for professional development for teachers of students with autism spectrum disorder in China. Journal of the International Association of Special Education, 1, 109-122.",
    "findings": "Improved teachers’ instruction in the classroom.",
    "title": "Distance Learning: A Viable Option for Professional Development for Teachers of Students with Autism Spectrum Disorder in China.",
    "authors": "Simpson, Lisa A.; Sharon Qi; Kan He; Qing Qing Tao",
    "year": 2016,
    "country": "China",
    "quality": "Level 3",
    "pop": "Simpson 2016, China",
    "intervention": "Intellectual",
    "outcomes": "Special,Pedagogical"
  },
  {
    "no": 16,
    "key": "7GSTUJPG",
    "URL": "http://dx.doi.org/10.1080/21683603.2015.1064841",
    "reference": "Srivastava, M., de Boer, A. A., & Pijl, S. J. (2015). Know how to teach me… Evaluating the effects of an in-service training program for regular school teachers toward inclusive education. International Journal of school & educational psychology, 3(4), 219-230.",
    "findings": "Improved teacher attitudes toward inclusive education,\nEnhanced teachers’ knowledge about the four types of SEN, and about teaching methods.",
    "title": "Know How to Teach Me… Evaluating the Effects of an In-Service Training Program for Regular School Teachers toward Inclusive Education",
    "authors": "Srivastava, Meenakshi; de Boer, Anke A.; Pijl, Sip Jan",
    "year": 2015,
    "country": "India",
    "quality": "Level 1",
    "pop": "Srivastava 2015, India",
    "intervention": "Inclusive",
    "outcomes": "Primary,Attitude,Pedagogical"
  },
  {
    "no": 17,
    "key": "9I9APPBY",
    "URL": "http://dx.doi.org/10.1177/0271121416659052",
    "reference": "Xie, H., Chen, C. I., Chen, C. Y., Squires, J., Li, W., & Liu, T. (2017). Developing a Home-Based Early Intervention Personnel Training Program in Southeast China. Topics in Early Childhood Special Education, 37(2), 68-80.",
    "findings": "Improved educators’ perception of their personal efficacy (e.g. abilities to offer beneficial services to children and families) and general efficacy (e.g., sense of the general effectiveness of family-centred early intervention).",
    "title": "Developing a Home-Based Early Intervention Personnel Training Program in Southeast China",
    "authors": "Xie, Huichao; Chen, Ching-I; Chen, Chieh-Yu; Squires, Jane; Li, Wenge; Liu, Tian",
    "year": 2017,
    "country": "China",
    "quality": "Level 2",
    "pop": "Xie 2017, China",
    "intervention": "Inclusive",
    "outcomes": "Early,Attitude"
  },
  {
    "no": 18,
    "key": "WU4TRMU9",
    "URL": "http://dx.doi.org/10.4324/9781315397702",
    "reference": "Yusuf, B. (2017). Essential technology skills for 21st-century teacher inclusive strategies. In Teacher Professional Knowledge and Development for Reflective and Inclusive Practices (pp. 146-157). Routledge.",
    "findings": "Teachers’ produced creative and innovative instructional approaches including ICT strategies for an inclusive classroom.\nThe teachers identified Google Docs as a transformative and collaborative peer-tutoring platform for inclusive activities.",
    "title": "Essential technology skills for 21st-century teacher inclusive strategies",
    "authors": "Yusuf, B.",
    "year": 2017,
    "country": "Malaysia",
    "quality": "Level 3",
    "pop": "Yusuf 2017, Malaysia",
    "intervention": "Inclusive",
    "outcomes": "Primary,Secondary,Pedagogical"
  }
]

// array  that contains the interventions and details. short is used to populate the grid cells
const interventions = [
    {
        "type": "Physical disability",
        "desc": "Includes studies aimed at supporting students with mobility, spinal-cord disability, head injuries, and/ or long term-illness.",
        "short": "physical",
    },
    {
        "type": "Sensory disability",
        "desc": "Includes studies aimed at supporting students with vision, hearing, speech or communication disabilities.",
        "short": "sensory",
    },
    {
        "type": "Mental and intellectual",
        "desc": "Includes studies aimed at supporting students with affect, cognition and learning disabilities.",
        "short": "intellectual",
    },
    {
        "type": "Inclusive",
        "desc": "Includes studies aimed at supporting all students",
        "short": "inclusive",
    },
];



const dfatCountries  = [
  {
    "name": "Afghanistan",
    "DFATsubRegion": "South Asia",
    "DFATdevelopingcountry": "dfatDev",
    "alpha3": "AFG",
    "numericCountryCode": 4,
    "alpha2": "AF",
    "lat": 33.93911,
    "long": 67.709953
  },
  {
    "name": "Armenia",
    "DFATsubRegion": "Western Asia",
    "DFATdevelopingcountry": "notDev",
    "alpha3": "ARM",
    "numericCountryCode": 51,
    "alpha2": "AM",
    "lat": 41.069099,
    "long": 45.038189
  },
  {
    "name": "Australia",
    "DFATsubRegion": "Pacific",
    "DFATdevelopingcountry": "notDev",
    "alpha3": "AUS",
    "numericCountryCode": 36,
    "alpha2": "AU",
    "lat": -25.274398,
    "long": 133.775136
  },
  {
    "name": "Azerbaijan",
    "DFATsubRegion": "Western Asia",
    "DFATdevelopingcountry": "notDev",
    "alpha3": "AZE",
    "numericCountryCode": 31,
    "alpha2": "AZ",
    "lat": 40.143105,
    "long": 48.576927
  },
  {
    "name": "Bangladesh",
    "DFATsubRegion": "South Asia",
    "DFATdevelopingcountry": "dfatDev",
    "alpha3": "BGD",
    "numericCountryCode": 50,
    "alpha2": "BD",
    "lat": 23.684994,
    "long": 90.356331
  },
  {
    "name": "Bhutan",
    "DFATsubRegion": "South Asia",
    "DFATdevelopingcountry": "dfatDev",
    "alpha3": "BTN",
    "numericCountryCode": 64,
    "alpha2": "BT",
    "lat": 27.514162,
    "long": 90.433601
  },
  {
    "name": "Brunei",
    "DFATsubRegion": "South East Asia",
    "DFATdevelopingcountry": "notDev",
    "alpha3": "BRN",
    "numericCountryCode": 96,
    "alpha2": "BN",
    "lat": 4.535277,
    "long": 114.727669
  },
  {
    "name": "Cambodia",
    "DFATsubRegion": "South East Asia",
    "DFATdevelopingcountry": "dfatDev",
    "alpha3": "KHM",
    "numericCountryCode": 116,
    "alpha2": "KH",
    "lat": 12.565679,
    "long": 104.990963
  },
  {
    "name": "China",
    "DFATsubRegion": "East Asia",
    "DFATdevelopingcountry": "dfatDev",
    "alpha3": "CHN",
    "numericCountryCode": 156,
    "alpha2": "CN",
    "lat": 35.86166,
    "long": 104.195397
  },
  {
    "name": "Cook Islands",
    "DFATsubRegion": "Pacific",
    "DFATdevelopingcountry": "dfatDev",
    "alpha3": "COK",
    "numericCountryCode": 184,
    "alpha2": "CK",
    "lat": -21.236736,
    "long": -159.777671
  },
  {
    "name": "Micronesia",
    "DFATsubRegion": "Pacific",
    "DFATdevelopingcountry": "dfatDev",
    "alpha3": "FSM",
    "numericCountryCode": 583,
    "alpha2": "FM",
    "lat": 7.425554,
    "long": 150.550812
  },
  {
    "name": "Fiji",
    "DFATsubRegion": "Pacific",
    "DFATdevelopingcountry": "dfatDev",
    "alpha3": "FJI",
    "numericCountryCode": 242,
    "alpha2": "FJ",
    "lat": -16.578193,
    "long": 179.414413
  },
  {
    "name": "French Polynesia",
    "DFATsubRegion": "Pacific",
    "DFATdevelopingcountry": "notDev",
    "alpha3": "PYF",
    "numericCountryCode": 258,
    "alpha2": "PF",
    "lat": -17.679742,
    "long": -149.406843
  },
  {
    "name": "Georgia",
    "DFATsubRegion": "Western Asia",
    "DFATdevelopingcountry": "notDev",
    "alpha3": "GEO",
    "numericCountryCode": 268,
    "alpha2": "GE",
    "lat": 42.315407,
    "long": 43.356892
  },
  {
    "name": "Guam",
    "DFATsubRegion": "Pacific",
    "DFATdevelopingcountry": "notDev",
    "alpha3": "GUM",
    "numericCountryCode": 316,
    "alpha2": "GU",
    "lat": 13.444304,
    "long": 144.793731
  },
  {
    "name": "Hong Kong",
    "DFATsubRegion": "East Asia",
    "DFATdevelopingcountry": "notDev",
    "alpha3": "HKG",
    "numericCountryCode": 344,
    "alpha2": "HK",
    "lat": 23,
    "long": 114.109497
  },
  {
    "name": "India",
    "DFATsubRegion": "South Asia",
    "DFATdevelopingcountry": "dfatDev",
    "alpha3": "IND",
    "numericCountryCode": 356,
    "alpha2": "IN",
    "lat": 20.593684,
    "long": 78.96288
  },
  {
    "name": "Indonesia",
    "DFATsubRegion": "South East Asia",
    "DFATdevelopingcountry": "dfatDev",
    "alpha3": "IDN",
    "numericCountryCode": 360,
    "alpha2": "ID",
    "lat": -0.789275,
    "long": 113.921327
  },
  {
    "name": "Japan",
    "DFATsubRegion": "East Asia",
    "DFATdevelopingcountry": "notDev",
    "alpha3": "JPN",
    "numericCountryCode": 392,
    "alpha2": "JP",
    "lat": 36.204824,
    "long": 138.252924
  },
  {
    "name": "Kazakhstan",
    "DFATsubRegion": "Central Asia",
    "DFATdevelopingcountry": "dfatDev",
    "alpha3": "KAZ",
    "numericCountryCode": 398,
    "alpha2": "KZ",
    "lat": 48.019573,
    "long": 66.923684
  },
  {
    "name": "Kiribati",
    "DFATsubRegion": "Pacific",
    "DFATdevelopingcountry": "dfatDev",
    "alpha3": "KIR",
    "numericCountryCode": 296,
    "alpha2": "KI",
    "lat": 3.370417,
    "long": -168.734039
  },
  {
    "name": "Kyrgyzstan",
    "DFATsubRegion": "Central Asia",
    "DFATdevelopingcountry": "dfatDev",
    "alpha3": "KGZ",
    "numericCountryCode": 417,
    "alpha2": "KG",
    "lat": 41.20438,
    "long": 74.766098
  },
  {
    "name": "Laos",
    "DFATsubRegion": "South East Asia",
    "DFATdevelopingcountry": "dfatDev",
    "alpha3": "LAO",
    "numericCountryCode": 418,
    "alpha2": "LA",
    "lat": 19.85627,
    "long": 102.495496
  },
  {
    "name": "Macao",
    "DFATsubRegion": "East Asia",
    "DFATdevelopingcountry": "notDev",
    "alpha3": "MAC",
    "numericCountryCode": 446,
    "alpha2": "MO",
    "lat": 22,
    "long": 113.543873
  },
  {
    "name": "Malaysia",
    "DFATsubRegion": "South East Asia",
    "DFATdevelopingcountry": "dfatDev",
    "alpha3": "MYS",
    "numericCountryCode": 458,
    "alpha2": "MY",
    "lat": 4.210484,
    "long": 101.975766
  },
  {
    "name": "Maldives",
    "DFATsubRegion": "South Asia",
    "DFATdevelopingcountry": "dfatDev",
    "alpha3": "MDV",
    "numericCountryCode": 462,
    "alpha2": "MV",
    "lat": 3.202778,
    "long": 73.22068
  },
  {
    "name": "Marshall Islands",
    "DFATsubRegion": "Pacific",
    "DFATdevelopingcountry": "dfatDev",
    "alpha3": "MHL",
    "numericCountryCode": 584,
    "alpha2": "MH",
    "lat": 7.131474,
    "long": 171.184478
  },
  {
    "name": "Mongolia",
    "DFATsubRegion": "East Asia",
    "DFATdevelopingcountry": "dfatDev",
    "alpha3": "MNG",
    "numericCountryCode": 496,
    "alpha2": "MN",
    "lat": 46.862496,
    "long": 103.846656
  },
  {
    "name": "Myanmar",
    "DFATsubRegion": "South East Asia",
    "DFATdevelopingcountry": "dfatDev",
    "alpha3": "MMR",
    "numericCountryCode": 104,
    "alpha2": "MM",
    "lat": 21.913965,
    "long": 95.956223
  },
  {
    "name": "Nauru",
    "DFATsubRegion": "Pacific",
    "DFATdevelopingcountry": "dfatDev",
    "alpha3": "NRU",
    "numericCountryCode": 520,
    "alpha2": "NR",
    "lat": -0.522778,
    "long": 166.931503
  },
  {
    "name": "Nepal",
    "DFATsubRegion": "South Asia",
    "DFATdevelopingcountry": "dfatDev",
    "alpha3": "NPL",
    "numericCountryCode": 524,
    "alpha2": "NP",
    "lat": 28.394857,
    "long": 84.124008
  },
  {
    "name": "New Caledonia",
    "DFATsubRegion": "Pacific",
    "DFATdevelopingcountry": "notDev",
    "alpha3": "NCL",
    "numericCountryCode": 540,
    "alpha2": "NC",
    "lat": -20.904305,
    "long": 165.618042
  },
  {
    "name": "New Zealand",
    "DFATsubRegion": "Pacific",
    "DFATdevelopingcountry": "notDev",
    "alpha3": "NZL",
    "numericCountryCode": 554,
    "alpha2": "NZ",
    "lat": -40.900557,
    "long": 174.885971
  },
  {
    "name": "Niue",
    "DFATsubRegion": "Pacific",
    "DFATdevelopingcountry": "dfatDev",
    "alpha3": "NIU",
    "numericCountryCode": 570,
    "alpha2": "NU",
    "lat": -19.054445,
    "long": -169.867233
  },
  {
    "name": "North Korea",
    "DFATsubRegion": "East Asia",
    "DFATdevelopingcountry": "dfatDev",
    "alpha3": "PRK",
    "numericCountryCode": 408,
    "alpha2": "KP",
    "lat": 40.339852,
    "long": 127.510093
  },
  {
    "name": "Northern Mariana Islands",
    "DFATsubRegion": "Pacific",
    "DFATdevelopingcountry": "notDev",
    "alpha3": "MNP",
    "numericCountryCode": 580,
    "alpha2": "MP",
    "lat": 17.33083,
    "long": 145.38469
  },
  {
    "name": "Pakistan",
    "DFATsubRegion": "South Asia",
    "DFATdevelopingcountry": "dfatDev",
    "alpha3": "PAK",
    "numericCountryCode": 586,
    "alpha2": "PK",
    "lat": 30.375321,
    "long": 69.345116
  },
  {
    "name": "Palau",
    "DFATsubRegion": "Pacific",
    "DFATdevelopingcountry": "dfatDev",
    "alpha3": "PLW",
    "numericCountryCode": 585,
    "alpha2": "PW",
    "lat": 7.51498,
    "long": 134.58252
  },
  {
    "name": "Papua New Guinea",
    "DFATsubRegion": "Pacific",
    "DFATdevelopingcountry": "dfatDev",
    "alpha3": "PNG",
    "numericCountryCode": 598,
    "alpha2": "PG",
    "lat": -6.314993,
    "long": 143.95555
  },
  {
    "name": "Philippines",
    "DFATsubRegion": "South East Asia",
    "DFATdevelopingcountry": "dfatDev",
    "alpha3": "PHL",
    "numericCountryCode": 608,
    "alpha2": "PH",
    "lat": 12.879721,
    "long": 121.774017
  },
  {
    "name": "Samoa",
    "DFATsubRegion": "Pacific",
    "DFATdevelopingcountry": "dfatDev",
    "alpha3": "WSM",
    "numericCountryCode": 882,
    "alpha2": "WS",
    "lat": -13.759029,
    "long": -172.104629
  },
  {
    "name": "Singapore",
    "DFATsubRegion": "South East Asia",
    "DFATdevelopingcountry": "notDev",
    "alpha3": "SGP",
    "numericCountryCode": 702,
    "alpha2": "SG",
    "lat": 1.352083,
    "long": 103.819836
  },
  {
    "name": "Solomon Islands",
    "DFATsubRegion": "Pacific",
    "DFATdevelopingcountry": "dfatDev",
    "alpha3": "SLB",
    "numericCountryCode": 90,
    "alpha2": "SB",
    "lat": -9.64571,
    "long": 160.156194
  },
  {
    "name": "South Korea",
    "DFATsubRegion": "East Asia",
    "DFATdevelopingcountry": "notDev",
    "alpha3": "KOR",
    "numericCountryCode": 410,
    "alpha2": "KR",
    "lat": 35.907757,
    "long": 127.766922
  },
  {
    "name": "Sri Lanka",
    "DFATsubRegion": "South Asia",
    "DFATdevelopingcountry": "dfatDev",
    "alpha3": "LKA",
    "numericCountryCode": 144,
    "alpha2": "LK",
    "lat": 7.873054,
    "long": 80.771797
  },
  {
    "name": "Taiwan",
    "DFATsubRegion": "East Asia",
    "DFATdevelopingcountry": "notDev",
    "alpha3": "TWN",
    "numericCountryCode": 158,
    "alpha2": "TW",
    "lat": 23.69781,
    "long": 120.960515
  },
  {
    "name": "Tajikistan",
    "DFATsubRegion": "Central Asia",
    "DFATdevelopingcountry": "dfatDev",
    "alpha3": "TJK",
    "numericCountryCode": 762,
    "alpha2": "TJ",
    "lat": 38.861034,
    "long": 71.276093
  },
  {
    "name": "Thailand",
    "DFATsubRegion": "South East Asia",
    "DFATdevelopingcountry": "dfatDev",
    "alpha3": "THA",
    "numericCountryCode": 764,
    "alpha2": "TH",
    "lat": 15.870032,
    "long": 100.992541
  },
  {
    "name": "Timor-Leste",
    "DFATsubRegion": "South East Asia",
    "DFATdevelopingcountry": "dfatDev",
    "alpha3": "TLS",
    "numericCountryCode": 626,
    "alpha2": "TL",
    "lat": -8.874217,
    "long": 125.727539
  },
  {
    "name": "Tokelau",
    "DFATsubRegion": "Pacific",
    "DFATdevelopingcountry": "dfatDev",
    "alpha3": "TKL",
    "numericCountryCode": 772,
    "alpha2": "TK",
    "lat": -8.967363,
    "long": -171.855881
  },
  {
    "name": "Tonga",
    "DFATsubRegion": "Pacific",
    "DFATdevelopingcountry": "dfatDev",
    "alpha3": "TON",
    "numericCountryCode": 776,
    "alpha2": "TO",
    "lat": -21.178986,
    "long": -175.198242
  },
  {
    "name": "Turkmenistan",
    "DFATsubRegion": "Central Asia",
    "DFATdevelopingcountry": "dfatDev",
    "alpha3": "TKM",
    "numericCountryCode": 795,
    "alpha2": "TM",
    "lat": 38.969719,
    "long": 59.556278
  },
  {
    "name": "Tuvalu",
    "DFATsubRegion": "Pacific",
    "DFATdevelopingcountry": "dfatDev",
    "alpha3": "TUV",
    "numericCountryCode": 798,
    "alpha2": "TV",
    "lat": -7.109535,
    "long": 177.64933
  },
  {
    "name": "Uzbekistan",
    "DFATsubRegion": "Central Asia",
    "DFATdevelopingcountry": "dfatDev",
    "alpha3": "UZB",
    "numericCountryCode": 860,
    "alpha2": "UZ",
    "lat": 41.377491,
    "long": 64.585262
  },
  {
    "name": "Vanuatu",
    "DFATsubRegion": "Pacific",
    "DFATdevelopingcountry": "dfatDev",
    "alpha3": "VUT",
    "numericCountryCode": 548,
    "alpha2": "VU",
    "lat": -15.376706,
    "long": 166.959158
  },
  {
    "name": "Vietnam",
    "DFATsubRegion": "South East Asia",
    "DFATdevelopingcountry": "dfatDev",
    "alpha3": "VNM",
    "numericCountryCode": 704,
    "alpha2": "VN",
    "lat": 14.058324,
    "long": 108.277199
  },
  {
    "name": "Wallis & Futuna",
    "DFATsubRegion": "Pacific",
    "DFATdevelopingcountry": "dfatDev",
    "alpha3": "WLF",
    "numericCountryCode": 876,
    "alpha2": "WF",
    "lat": -12.768752,
    "long": -177.156097
  }
]



// array values are used to populate grid cells by searching data array with these values.
const outcomes = ["early","primary","secondary","special","attitude","pedagogical","managing","learning","behaviour"];

//create array of country names from data country keys
const allCountries = data.map(({country}) => country);

// unique countries from 
const countrylist = [...new Set(allCountries)];

//https://stackoverflow.com/questions/57550082/creating-a-16x16-grid-using-javascript

//adds the second row of headRows divs to the end of the first row of hard coded headRows and then the intervention rows and then the grid cells.
//adds unique id from data intervention and outcome values and classes to each grid cell
const grid = document.getElementById("grid");

function makeGrid() {
    for (a=0; a<interventions.length; a++) {
        let cell = document.createElement("div");
        cell.innerText = interventions[a].type;
        grid.appendChild(cell).id = interventions[a].short;
        grid.appendChild(cell).className = "intervention headRow";
        

        for (b = 0; b < outcomes.length; b++) {
            let cell = document.createElement("div");
            grid.appendChild(cell).id = interventions[a].short + outcomes[b];
            grid.appendChild(cell).className = interventions[a].short + " " + outcomes[b] + " square";
        };
    };
};
// dimensions of grid including the html hard coded first headRow
makeGrid(6, 10);

//this selects all square elements and then creates an array
let allGrids = document.querySelectorAll(".square");
let allGridsArray = Array.from(allGrids);

//this generates tippys for the interventions as per the interventions array
for (x of interventions) {
    tippy("#" + x.short, {
        maxWidth: 500,
        content: x.desc,
        
        allowHTML: true,
        appendTo: 'parent'
        //appendTo: document.body
    });
}
//execute tippys and circles for grid
circlesAndTippys();
//this uses the array of elements with a class of square created above and thier first (intervention) and second (outcome) classes as values to use in the filter search
function circlesAndTippys() {
removeTipCircles();
for (i=0; i < allGridsArray.length; i++) {
    let y = allGridsArray[i].classList[0];
    let z = allGridsArray[i].classList[1];
    //this filters the square element array and creates a new variable to calculate the length to use as the radius of the circle. same filter is used in the tippy generator below
    let pip = data.filter(it => it.intervention.toLowerCase().includes(y) && it.outcomes.toLowerCase().includes(z));
    allGridsArray[i].innerHTML += '<svg class="circle show' + z + '" xmlns="http://www.w3.org/2000/svg" version="1.1" width="100%" height="100%" viewBox="0 0 100 100"> <circle r=' + pip.length * 7 + ' cx="50%" cy="50%" stroke="FF5F33" stroke-width="2" fill=""/></svg>';
  //console.log(pip);
    //this compares the values in the data to the class list on the square element and if they match it adds the URL and author text to the tippy.
    let pop = "";
    for(var j = 0; j < data.length; j++){
        if(data[j].intervention.toLowerCase().includes(y) && data[j].outcomes.toLowerCase().includes(z))
            pop += "<a target=_blank" + ' href=' + data[j].URL + '>' + data[j].pop +'</a>' + '<br>';

            //this just displays author - use this if there no url in the data file
            // else if(data[j].URL === "" && data[j].intervention === y && data[j].outcome.includes(z))
            // pop += data[j].pop + '<br>';
    };
    

    // if(pop.length > 0 && !allGridsArray[i].class.contains('filter'))
    if(pop.length > 0)
    tippy("#" + allGridsArray[i].id, {
    maxWidth: '',
    content: '<p>' + data.filter(it => it.intervention.toLowerCase().includes(y) && it.outcomes.toLowerCase().includes(z)).length + '</p>' + pop,
    allowHTML: true,
    //theme: 'origTippy',
    //trigger: 'click',
    placement: "right",
    boundary: 'parent',
    appendTo: 'parent',
    interactive: true
    });
    pop = '';
};
}
// set variables for grids in each outcome area
let settingGrids = document.querySelectorAll(".setting,.early,.primary,.secondary,.special");
let teacherGrids = document.querySelectorAll(".attitude,.pedagogical,.managing");
let studentGrids = document.querySelectorAll(".learning,.behaviour");
// add classes for show hide outcomes for smaller screens
for (var x = 0; x < settingGrids.length; x++) {
    settingGrids[x].className += ' setting ';
}
for (var x = 0; x < teacherGrids.length; x++) {
    teacherGrids[x].className += ' teacher ';
}
for (var x = 0; x < studentGrids.length; x++) {
    studentGrids[x].className += ' student ';
}
// function to show grids with teacher class and hide others
function showTeacher() {
    document.getElementById("grid").style.gridTemplateColumns = "repeat(4, 25vmin)";
    document.getElementById("teacheroutcomes").style.gridColumn = "2/5";
    Array.from(document.querySelectorAll(".teacher"))
    .forEach(function(val) {
        val.style.display = 'grid';
    });Array.from(document.querySelectorAll(".setting,.student"))
    .forEach(function(val) {
        val.style.display = 'none';
    });

}
// function to show grids with student class and hide others
function showStudent() {
    document.getElementById("grid").style.gridTemplateColumns = "repeat(3, 33vmin)";
    document.getElementById("studentoutcomes").style.gridColumn = "2/4";
    Array.from(document.querySelectorAll(".student"))
    .forEach(function(val) {
        val.style.display = 'grid';
    });
    Array.from(document.querySelectorAll(".setting,.teacher"))
    .forEach(function(val) {
        val.style.display = 'none';
    });
}
// function to show grids with setting class and hide others
function showSetting() {
    document.getElementById("grid").style.gridTemplateColumns = "repeat(5, 20vmin)";
    document.getElementById("setting").style.gridColumn = "2/6";
    Array.from(document.querySelectorAll(".setting"))
    .forEach(function(val) {
        val.style.display = 'grid';
    });
    Array.from(document.querySelectorAll(".teacher,.student"))
    .forEach(function(val) {
        val.style.display = 'none';
    });
}

// this is the d3 map https://gist.run/?id=3ccd770923a61f26f55156657e2f51e8 https://bl.ocks.org/d3indepth/raw/3ccd770923a61f26f55156657e2f51e8/
// this is for globe display
// var projection = d3.geoOrthographic()
// .scale(280)
//   .translate([300, 310])
//   .center([0, 5])
//   .rotate([-100,0,0]);


let width = d3.select("#chart").node().getBoundingClientRect().width;
let height = d3.select("#chart").node().getBoundingClientRect().height;


//this is for flat map display
var projection = d3.geoMercator()
.scale(350)
  .translate([700, 300])
  .center([0, 0])
  .rotate([-165, 0]);

var geoGenerator = d3.geoPath()
  .projection(projection);


function handleMouseover(d) {

  // var pixelArea = geoGenerator.area(d);
  // var bounds = geoGenerator.bounds(d);
  // var centroid = geoGenerator.centroid(d);
  // var measure = geoGenerator.measure(d);

  d3.select('#content .info')
  //.text(d.properties.name + ' (path.area = ' + pixelArea.toFixed(1) + ' path.measure = ' + measure.toFixed(1) + ')');
  .text(d.properties.name);

  // d3.select('#content .bounding-box rect')
  //   .attr('x', bounds[0][0])
  //   .attr('y', bounds[0][1])
  //   .attr('width', bounds[1][0] - bounds[0][0])
  //   .attr('height', bounds[1][1] - bounds[0][1]);
  // d3.select('#content .centroid')
  //   .style('display', 'inline')
  //   .attr('transform', 'translate(' + centroid + ')');
    
}


  var svg = d3.select("#chart")
  //.append("svg")
  // .attr("width", width)
  // .attr("height", height)
  //.attr("viewBox", `0 0 900 900`)
  .call(d3.zoom().on("zoom", function () {
          svg.attr("transform", d3.event.transform)
  }))
  .append("svg")
  .attr("width", width)
  .attr("height", height)
  .append("g");


function update(geojson) {
  var u = d3.select('g')
    .selectAll('path')
    .data(geojson.features);

u.enter()
    .append('path')
    .attr("id",  d => d.properties.name_long.toLowerCase().replace(/\s+/g, ''))
    .attr("class", d => d.properties.name)
    .attr("class", d => d.properties.adm0_a3)
    .attr("name", d => d.properties.name_long)
    //.attr("alpha", dfatCountries => dfatCountries.name)
    // .attr("text-anchor", "middle")
    // .attr("fill", "black")
    .classed(" land", true)
    .attr('d', geoGenerator)
    .on('mouseover', handleMouseover)
    .on('mouseover', );
}    

//add colours to land paths and tippy for countries with studies
function draw() {
  let cpath = document.querySelectorAll(".land");
  let cpathArray = Array.from(cpath);



  for (t=0; t<countrylist.length; t++) {

  for (i=0; i<cpathArray.length; i++) {

    //this adds classes to paths from dfatCountries array to assist with css colours
    for(j=0;j<dfatCountries.length;j++) {
      if(cpathArray[i].classList.contains(dfatCountries[j].alpha3))
        cpathArray[i].classList.add(dfatCountries[j].DFATsubRegion.replace(/\s+/g, ''));
          if(cpathArray[i].classList.contains(dfatCountries[j].alpha3))
            cpathArray[i].classList.add(dfatCountries[j].DFATdevelopingcountry.replace(/\s+/g, ''));
    }
    let y = countrylist[t].toLowerCase().replace(/\s+/g, '');
    

      //this compares the values in the data.country to the id of the path element and if they match it adds the values below to the tippy.
      let pop = "";
      for(var j = 0; j < data.length; j++){
          if(data[j].country.toLowerCase().replace(/\s+/g, '').includes(y) && (cpathArray[i].id.includes(y))) {
              pop += '</br><b>' + data[j].title + '</b>' + ' ' + data[j].authors + ' (' + data[j].year + ")" + '<br>' + "Key findings: " + data[j].findings + '<br>' + "<a target=_blank" + ' href=' + data[j].URL + '>' + data[j].URL +'</a></br>';
              cpathArray[i].classList.add("study");
          }

      };

      if(!pop == "") {
          tippy("#" + cpathArray[i].id, {
          trigger:'click',
          interactiveBorder: 30,
          maxWidth: '900px',
          content: '<b>' + data.filter(it => it.country.toLowerCase().replace(/\s+/g, '').includes(y)).length + " " + cpathArray[i].__data__.properties.name_long + '</b><br>' + pop,
          followCursor: "initial",
          allowHTML: true,
          theme: "white",
          //placement: "top",
          //arrow: "false",
          boundary: 'parent',
          //sticky: 'true',
          //appendTo: 'parent',
          appendTo: document.body,
          interactive: true
          });
      }
      pop = '';
  };
};
}



//REQUEST DATA
d3.json('countries.json', function(error, json) {
  update(json)
  labels()
  draw()
})

//puts svg circle in centre of dfat countries using latitude and longitude
function labels() {
  svg.selectAll(".pin")
    .data(dfatCountries)
    .enter().append("circle", ".pin")
    .attr("r", 2)
    .attr("stroke","black")
    //.attr("stroke-width",".01")
    .attr("class", d => d.DFATdevelopingcountry)
    .attr("transform", function(d) {
      return "translate(" + projection([
        d.long,
        d.lat
      ]) + ")";
    });

  //svg country labels positioned by lat long from dfatcountries array
  svg.selectAll('labels')
    .data(dfatCountries)
    .enter()
      .append('text')
      .text(d => d.name)
      .attr("text-anchor", "middle")
      .attr("fill", "black")
      .attr("transform", function(d) {
        return "translate(" + projection([
          d.long,
          d.lat + 1
        ]) + ")";
        })
      .attr("class","labels");   
}

const legend = d3.select("#chart")

//legend for map
const keys = ["High Income", "Low and Middle Income", "Evidence available", "Not included"]

//color scale
const color = d3.scaleOrdinal()
  .domain(keys)
  .range(["#1d8ba7","#859cd3", "#5c4063", "#efefef"]);
// draw legend circles
const size = 20
legend.selectAll()
  .data(keys)
  .enter()
  .append("circle")
    .attr("r", 8)
    .attr("class","legend")
    .attr("stroke", "black")
    .attr("stroke-width", 2)
    .attr("cx", 12)
    .attr("cy", function(d,i){ return 408 + i*(size+6)}) // 100 is where the first dot appears. 25 is the distance between dots
    .style("fill", function(d){ return color(d)})

// draw legend text categories from keys const
legend.selectAll("mylabels")
  .data(keys)
  .enter()
  .append("text")
    .attr("x", 5 + size*1.2)
    .attr("y", function(d,i){ return 400 + i*(size+6) + (size/2)}) // 100 is where the first dot appears. 25 is the distance between dots
    .style("fill", "black")
    //.style("fill", function(d){ return color(d)})
    .text(function(d){ return d})
    .attr("text-anchor", "left")
    .style("alignment-baseline", "middle")



// hovers for outcomes descriptions
tippy("#teacherattitudes", {
  maxWidth: 500,
  content: "Relates to teachers’ attitudes (acceptance, confidence, and self- efficacy) towards children with disabilities and knowledge about and understanding of inclusive practices.",
  allowHTML: true,
  appendTo: 'parent'
});
tippy("#teacherpedagogical", {
  maxWidth: 500,
  content: "Focuses on teachers’ gaining skills to improve pedagogical practice for the purpose of improving inclusive practices and educational outcomes for children with disabilities.",
  allowHTML: true,
  appendTo: 'parent'
});
tippy("#teachermanaging", {
  maxWidth: 500,
  content: "Enables teachers to develop strategies to more effectively manage behaviour issues among children with disabilities.",
  allowHTML: true,
  appendTo: 'parent'
});
tippy("#studentlearning", {
  maxWidth: 500,
  content: "Results in positive learning and achievement outcomes for children with disabilities.",
  allowHTML: true,
  appendTo: 'parent'
});
tippy("#studentbehaviour", {
  maxWidth: 500,
  content: "Improves the behaviour and engagement of children with disabilities.",
  allowHTML: true,
  appendTo: 'parent'
});
tippy("#interventions", {
  maxWidth: 500,
  content: "Professional learning that supports…",
  allowHTML: true,
  appendTo: 'parent'
});

// filterSelection("all")
// function filterSelection(c) {
//   var x, i;
//   x = document.getElementsByClassName("filterDiv");
//   if (c == "all") c = "";
//   for (i = 0; i < x.length; i++) {
//     RemoveClass(x[i], "show");
//     if (x[i].className.indexOf(c) > -1) AddClass(x[i], "show");
//   }
// }

// function AddClass(element, name) {
//   var i, arr1, arr2;
//   arr1 = element.className.split(" ");
//   arr2 = name.split(" ");
//   for (i = 0; i < arr2.length; i++) {
//     if (arr1.indexOf(arr2[i]) == -1) {element.className += " " + arr2[i];}
//   }
// }

// function RemoveClass(element, name) {
//   var i, arr1, arr2;
//   arr1 = element.className.split(" ");
//   arr2 = name.split(" ");
//   for (i = 0; i < arr2.length; i++) {
//     while (arr1.indexOf(arr2[i]) > -1) {
//       arr1.splice(arr1.indexOf(arr2[i]), 1);     
//     }
//   }
//   element.className = arr1.join(" ");
// }

// Add active class to the current country button (highlight it)
var btnContainer = document.getElementById("myBtnContainer");
var btns = btnContainer.getElementsByClassName("btnCountry");
for (var i = 0; i < btns.length; i++) {
  btns[i].addEventListener("click", function(){
    const all = document.getElementById('myBtnContainer');
    const current = all.querySelectorAll(".active");
    current[0].className = current[0].className.replace(" active", "");
    this.className += " active";
  });
}
// Add active class to the current outcomes button (highlight it)
var outcomebtnsContainer = document.getElementById("tog");
var outcomebtns = outcomebtnsContainer.getElementsByClassName("btnOutcomes");
for (var i = 0; i < outcomebtns.length; i++) {
  outcomebtns[i].addEventListener("click", function(){
    const all = document.getElementById('tog');
    const current = all.querySelectorAll(".active");
    current[0].className = current[0].className.replace(" active", "");
    this.className += " active";
  });
}

//parent = document.querySelector('.parent');
//children = parent.children; // [<div class="child1">]


function removeTipCircles (){
  var list = document.querySelectorAll(".square");
 // console.log(list);

  // As long as <ul> has a child node, remove it
  for(i=0;i<list.length;i++){
    while (list[i].hasChildNodes()) {  
      list[i].removeChild(list[i].firstChild);
    }
}
//https://github.com/atomiks/tippyjs/issues/473
[...document.querySelectorAll('.square')].forEach(node => {
  if (node._tippy) {
    node._tippy.destroy();
  }
});
  // #physicalsecondary > svg > circle
// d3.select("square.parent").selectAll("*").remove();

//  d3.select(".grid").selectAll(".circle").remove();

// // d3.selectAll('circle').remove();
// // d3.selectAll('.circle').remove();
//d3.select('.square').selectAll('_tippy').destroy();
// d3.selectAll('.tippy-box').remove();
// d3.selectAll('.tippy-content').remove();
// d3.selectAll('.tippy-arrow').remove();
}

function countryFilter(val) {
removeTipCircles();

for (i=0; i < allGridsArray.length; i++) {
  let countryData = data.filter(it => it.country.toLowerCase().includes(val));
  console.log(countryData);
  
  let y = allGridsArray[i].classList[0];
  let z = allGridsArray[i].classList[1];
  //this filters the square element array and creates a new variable to calculate the length to use as the radius of the circle. same filter is used in the tippy generator below
  let pip = countryData.filter(it => it.intervention.toLowerCase().includes(y) && it.outcomes.toLowerCase().includes(z));
  allGridsArray[i].innerHTML += '<svg class="circle' + z + '" xmlns="http://www.w3.org/2000/svg" version="1.1" width="100%" height="100%" viewBox="0 0 100 100"> <circle r=' + pip.length * 7 + ' cx="50%" cy="50%" stroke="FF5F33" stroke-width="2" fill=""/></svg>';
console.log(pip);
  //this compares the values in the data to the class list on the square element and if they match it adds the URL and author text to the tippy.
  let pop = "";
  for(var j = 0; j < countryData.length; j++){
      if(countryData[j].intervention.toLowerCase().includes(y) && countryData[j].outcomes.toLowerCase().includes(z))
          pop += "<a target=_blank" + ' href=' + countryData[j].URL + '>' + countryData[j].pop +'</a>' + '<br>';

          //this just displays author - use this if there no url in the data file
          // else if(data[j].URL === "" && data[j].intervention === y && data[j].outcome.includes(z))
          // pop += data[j].pop + '<br>';
  };
  

  // if(pop.length > 0 && !allGridsArray[i].class.contains('filter'))
  if(pop.length > 0)
  tippy("#" + allGridsArray[i].id, {
  maxWidth: '',
  content: '<p>' + countryData.filter(it => it.intervention.toLowerCase().includes(y) && it.outcomes.toLowerCase().includes(z)).length + '</p>' + pop,
  allowHTML: true,
  //trigger: 'click',
  placement: "right",
  boundary: 'parent',
  appendTo: 'parent',
  interactive: true
  });
  pop = '';
};
countryData = '';
}